"use strict";(self.webpackChunk_govuk_react_storybook=self.webpackChunk_govuk_react_storybook||[]).push([[9241],{"../../node_modules/react-final-form/dist/react-final-form.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gN:()=>Field,l0:()=>ReactFinalForm});var esm_extends=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutPropertiesLoose=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),react=__webpack_require__("../../node_modules/react/index.js"),charCodeOfDot=".".charCodeAt(0),reEscapeChar=/\\(\\)?/g,rePropName=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),keysCache={},keysRegex=/[.[\]]+/,toPath=function toPath(key){if(null==key||!key.length)return[];if("string"!=typeof key)throw new Error("toPath() expects a string");return null==keysCache[key]&&(key.endsWith("[]")?keysCache[key]=key.split(keysRegex).filter(Boolean):keysCache[key]=function stringToPath(string){var result=[];return string.charCodeAt(0)===charCodeOfDot&&result.push(""),string.replace(rePropName,(function(match,expression,quote,subString){var key=match;quote?key=subString.replace(reEscapeChar,"$1"):expression&&(key=expression.trim()),result.push(key)})),result}(key)),keysCache[key]},getIn=function getIn(state,complexKey){for(var path=toPath(complexKey),current=state,i=0;i<path.length;i++){var key=path[i];if(null==current||"object"!=typeof current||Array.isArray(current)&&isNaN(key))return;current=current[key]}return current};function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}var setInRecursor=function setInRecursor(current,index,path,value,destroyArrays){if(index>=path.length)return value;var key=path[index];if(isNaN(key)){var _extends2;if(null==current){var _ref,_result=setInRecursor(void 0,index+1,path,value,destroyArrays);return void 0===_result?void 0:((_ref={})[key]=_result,_ref)}if(Array.isArray(current))throw new Error("Cannot set a non-numeric property on an array");var _result2=setInRecursor(current[key],index+1,path,value,destroyArrays);if(void 0===_result2){var numKeys=Object.keys(current).length;if(void 0===current[key]&&0===numKeys)return;return void 0!==current[key]&&numKeys<=1?isNaN(path[index-1])||destroyArrays?void 0:{}:(current[key],(0,objectWithoutPropertiesLoose.Z)(current,[key].map(_toPropertyKey)))}return(0,esm_extends.Z)({},current,((_extends2={})[key]=_result2,_extends2))}var numericKey=Number(key);if(null==current){var _result3=setInRecursor(void 0,index+1,path,value,destroyArrays);if(void 0===_result3)return;var _array=[];return _array[numericKey]=_result3,_array}if(!Array.isArray(current))throw new Error("Cannot set a numeric property on an object");var result=setInRecursor(current[numericKey],index+1,path,value,destroyArrays),array=[].concat(current);if(destroyArrays&&void 0===result){if(array.splice(numericKey,1),0===array.length)return}else array[numericKey]=result;return array},setIn=function setIn(state,key,value,destroyArrays){if(void 0===destroyArrays&&(destroyArrays=!1),null==state)throw new Error("Cannot call setIn() with "+String(state)+" state");if(null==key)throw new Error("Cannot call setIn() with "+String(key)+" key");return setInRecursor(state,0,toPath(key),value,destroyArrays)},FORM_ERROR="FINAL_FORM/form-error",ARRAY_ERROR="FINAL_FORM/array-error";function publishFieldState(formState,field){var errors=formState.errors,initialValues=formState.initialValues,lastSubmittedValues=formState.lastSubmittedValues,submitErrors=formState.submitErrors,submitFailed=formState.submitFailed,submitSucceeded=formState.submitSucceeded,submitting=formState.submitting,values=formState.values,active=field.active,blur=field.blur,change=field.change,data=field.data,focus=field.focus,modified=field.modified,modifiedSinceLastSubmit=field.modifiedSinceLastSubmit,name=field.name,touched=field.touched,validating=field.validating,visited=field.visited,value=getIn(values,name),error=getIn(errors,name);error&&error[ARRAY_ERROR]&&(error=error[ARRAY_ERROR]);var submitError=submitErrors&&getIn(submitErrors,name),initial=initialValues&&getIn(initialValues,name),pristine=field.isEqual(initial,value),valid=!error&&!submitError;return{active,blur,change,data,dirty:!pristine,dirtySinceLastSubmit:!(!lastSubmittedValues||field.isEqual(getIn(lastSubmittedValues,name),value)),error,focus,initial,invalid:!valid,length:Array.isArray(value)?value.length:void 0,modified,modifiedSinceLastSubmit,name,pristine,submitError,submitFailed,submitSucceeded,submitting,touched,valid,value,visited,validating}}var fieldSubscriptionItems=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],shallowEqual=function shallowEqual(a,b){if(a===b)return!0;if("object"!=typeof a||!a||"object"!=typeof b||!b)return!1;var keysA=Object.keys(a),keysB=Object.keys(b);if(keysA.length!==keysB.length)return!1;for(var bHasOwnProperty=Object.prototype.hasOwnProperty.bind(b),idx=0;idx<keysA.length;idx++){var key=keysA[idx];if(!bHasOwnProperty(key)||a[key]!==b[key])return!1}return!0};function subscriptionFilter(dest,src,previous,subscription,keys,shallowEqualKeys){var different=!1;return keys.forEach((function(key){subscription[key]&&(dest[key]=src[key],previous&&(~shallowEqualKeys.indexOf(key)?shallowEqual(src[key],previous[key]):src[key]===previous[key])||(different=!0))})),different}var shallowEqualKeys$1=["data"],filterFieldState=function filterFieldState(state,previousState,subscription,force){var result={blur:state.blur,change:state.change,focus:state.focus,name:state.name};return subscriptionFilter(result,state,previousState,subscription,fieldSubscriptionItems,shallowEqualKeys$1)||!previousState||force?result:void 0},formSubscriptionItems=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],shallowEqualKeys=["touched","visited"];function filterFormState(state,previousState,subscription,force){var result={};return subscriptionFilter(result,state,previousState,subscription,formSubscriptionItems,shallowEqualKeys)||!previousState||force?result:void 0}var memoize=function memoize(fn){var lastArgs,lastResult;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return lastArgs&&args.length===lastArgs.length&&!args.some((function(arg,index){return!shallowEqual(lastArgs[index],arg)}))||(lastArgs=args,lastResult=fn.apply(void 0,args)),lastResult}},isPromise=function(obj){return!!obj&&("object"==typeof obj||"function"==typeof obj)&&"function"==typeof obj.then},tripleEquals=function tripleEquals(a,b){return a===b},hasAnyError=function hasAnyError(errors){return Object.keys(errors).some((function(key){var value=errors[key];return!value||"object"!=typeof value||value instanceof Error?void 0!==value:hasAnyError(value)}))};function notifySubscriber(subscriber,subscription,state,lastState,filter,force){var notification=filter(state,lastState,subscription,force);return!!notification&&(subscriber(notification),!0)}function notify(_ref2,state,lastState,filter,force){var entries=_ref2.entries;Object.keys(entries).forEach((function(key){var entry=entries[Number(key)];if(entry){var subscription=entry.subscription,subscriber=entry.subscriber,notified=entry.notified;notifySubscriber(subscriber,subscription,state,lastState,filter,force||!notified)&&(entry.notified=!0)}}))}function createForm(config){if(!config)throw new Error("No config specified");var debug=config.debug,destroyOnUnregister=config.destroyOnUnregister,keepDirtyOnReinitialize=config.keepDirtyOnReinitialize,initialValues=config.initialValues,mutators=config.mutators,onSubmit=config.onSubmit,validate=config.validate,validateOnBlur=config.validateOnBlur;if(!onSubmit)throw new Error("No onSubmit function specified");var state={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{asyncErrors:{},dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:initialValues&&(0,esm_extends.Z)({},initialValues),invalid:!1,pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,resetWhileSubmitting:!1,valid:!0,validating:0,values:initialValues?(0,esm_extends.Z)({},initialValues):{}},lastFormState:void 0},inBatch=0,validationPaused=!1,validationBlocked=!1,preventNotificationWhileValidationPaused=!1,nextAsyncValidationKey=0,asyncValidationPromises={},changeValue=function changeValue(state,name,mutate){var after=mutate(getIn(state.formState.values,name));state.formState.values=setIn(state.formState.values,name,after)||{}},renameField=function renameField(state,from,to){if(state.fields[from]){var _extends2,_extends3;state.fields=(0,esm_extends.Z)({},state.fields,((_extends2={})[to]=(0,esm_extends.Z)({},state.fields[from],{name:to,blur:function blur(){return api.blur(to)},change:function change(value){return api.change(to,value)},focus:function focus(){return api.focus(to)},lastFieldState:void 0}),_extends2)),delete state.fields[from],state.fieldSubscribers=(0,esm_extends.Z)({},state.fieldSubscribers,((_extends3={})[to]=state.fieldSubscribers[from],_extends3)),delete state.fieldSubscribers[from];var value=getIn(state.formState.values,from);state.formState.values=setIn(state.formState.values,from,void 0)||{},state.formState.values=setIn(state.formState.values,to,value),delete state.lastFormState}},getMutatorApi=function getMutatorApi(key){return function(){if(mutators){for(var mutatableState={formState:state.formState,fields:state.fields,fieldSubscribers:state.fieldSubscribers,lastFormState:state.lastFormState},_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var returnValue=mutators[key](args,mutatableState,{changeValue,getIn,renameField,resetFieldState:api.resetFieldState,setIn,shallowEqual});return state.formState=mutatableState.formState,state.fields=mutatableState.fields,state.fieldSubscribers=mutatableState.fieldSubscribers,state.lastFormState=mutatableState.lastFormState,runValidation(void 0,(function(){notifyFieldListeners(),notifyFormListeners()})),returnValue}}},mutatorsApi=mutators?Object.keys(mutators).reduce((function(result,key){return result[key]=getMutatorApi(key),result}),{}):{},getValidators=function getValidators(field){return Object.keys(field.validators).reduce((function(result,index){var validator=field.validators[Number(index)]();return validator&&result.push(validator),result}),[])},runValidation=function runValidation(fieldChanged,callback){if(validationPaused)return validationBlocked=!0,void callback();var fields=state.fields,formState=state.formState,safeFields=(0,esm_extends.Z)({},fields),fieldKeys=Object.keys(safeFields);if(validate||fieldKeys.some((function(key){return getValidators(safeFields[key]).length}))){var limitedFieldLevelValidation=!1;if(fieldChanged){var changedField=safeFields[fieldChanged];if(changedField){var validateFields=changedField.validateFields;validateFields&&(limitedFieldLevelValidation=!0,fieldKeys=validateFields.length?validateFields.concat(fieldChanged):[fieldChanged])}}var recordLevelErrors={},asyncRecordLevelErrors={},fieldLevelErrors={},promises=[].concat(function runRecordLevelValidation(setErrors){var promises=[];if(validate){var errorsOrPromise=validate((0,esm_extends.Z)({},state.formState.values));isPromise(errorsOrPromise)?promises.push(errorsOrPromise.then((function(errors){return setErrors(errors,!0)}))):setErrors(errorsOrPromise,!1)}return promises}((function(errors,wasAsync){wasAsync?asyncRecordLevelErrors=errors||{}:recordLevelErrors=errors||{}})),fieldKeys.reduce((function(result,name){return result.concat(function runFieldLevelValidation(field,setError){var error,promises=[],validators=getValidators(field);return validators.length&&(validators.forEach((function(validator){var errorOrPromise=validator(getIn(state.formState.values,field.name),state.formState.values,0===validator.length||3===validator.length?publishFieldState(state.formState,state.fields[field.name]):void 0);if(errorOrPromise&&isPromise(errorOrPromise)){field.validating=!0;var promise=errorOrPromise.then((function(error){state.fields[field.name]&&(state.fields[field.name].validating=!1,setError(error))}));promises.push(promise)}else error||(error=errorOrPromise)})),setError(error)),promises}(fields[name],(function(error){fieldLevelErrors[name]=error})))}),[])),hasAsyncValidations=promises.length>0,asyncValidationPromiseKey=++nextAsyncValidationKey,promise=Promise.all(promises).then(function clearAsyncValidationPromise(key){return function(result){return delete asyncValidationPromises[key],result}}(asyncValidationPromiseKey));hasAsyncValidations&&(asyncValidationPromises[asyncValidationPromiseKey]=promise);var processErrors=function processErrors(afterAsync){var merged=(0,esm_extends.Z)({},limitedFieldLevelValidation?formState.errors:{},recordLevelErrors,afterAsync?asyncRecordLevelErrors:formState.asyncErrors),forEachError=function forEachError(fn){fieldKeys.forEach((function(name){if(fields[name]){var recordLevelError=getIn(recordLevelErrors,name),errorFromParent=getIn(merged,name),hasFieldLevelValidation=getValidators(safeFields[name]).length,fieldLevelError=fieldLevelErrors[name];fn(name,hasFieldLevelValidation&&fieldLevelError||validate&&recordLevelError||(recordLevelError||limitedFieldLevelValidation?void 0:errorFromParent))}}))};forEachError((function(name,error){merged=setIn(merged,name,error)||{}})),forEachError((function(name,error){if(error&&error[ARRAY_ERROR]){var existing=getIn(merged,name),copy=[].concat(existing);copy[ARRAY_ERROR]=error[ARRAY_ERROR],merged=setIn(merged,name,copy)}})),shallowEqual(formState.errors,merged)||(formState.errors=merged),afterAsync&&(formState.asyncErrors=asyncRecordLevelErrors),formState.error=recordLevelErrors[FORM_ERROR]};if(hasAsyncValidations&&(state.formState.validating++,callback()),processErrors(!1),callback(),hasAsyncValidations){var afterPromise=function afterPromise(){state.formState.validating--,callback(),0===state.formState.validating&&state.lastFormState.validating&&notifyFormListeners()};promise.then((function(){nextAsyncValidationKey>asyncValidationPromiseKey||processErrors(!0)})).then(afterPromise,afterPromise)}}else callback()},notifyFieldListeners=function notifyFieldListeners(name){if(!inBatch){var fields=state.fields,fieldSubscribers=state.fieldSubscribers,formState=state.formState,safeFields=(0,esm_extends.Z)({},fields),notifyField=function notifyField(name){var field=safeFields[name],fieldState=publishFieldState(formState,field),lastFieldState=field.lastFieldState;field.lastFieldState=fieldState;var fieldSubscriber=fieldSubscribers[name];fieldSubscriber&&notify(fieldSubscriber,fieldState,lastFieldState,filterFieldState,void 0===lastFieldState)};name?notifyField(name):Object.keys(safeFields).forEach(notifyField)}},markAllFieldsTouched=function markAllFieldsTouched(){Object.keys(state.fields).forEach((function(key){state.fields[key].touched=!0}))},calculateNextFormState=function calculateNextFormState(){var fields=state.fields,formState=state.formState,lastFormState=state.lastFormState,safeFields=(0,esm_extends.Z)({},fields),safeFieldKeys=Object.keys(safeFields),foundDirty=!1,dirtyFields=safeFieldKeys.reduce((function(result,key){return!safeFields[key].isEqual(getIn(formState.values,key),getIn(formState.initialValues||{},key))&&(foundDirty=!0,result[key]=!0),result}),{}),dirtyFieldsSinceLastSubmit=safeFieldKeys.reduce((function(result,key){var nonNullLastSubmittedValues=formState.lastSubmittedValues||{};return safeFields[key].isEqual(getIn(formState.values,key),getIn(nonNullLastSubmittedValues,key))||(result[key]=!0),result}),{});formState.pristine=!foundDirty,formState.dirtySinceLastSubmit=!(!formState.lastSubmittedValues||!Object.values(dirtyFieldsSinceLastSubmit).some((function(value){return value}))),formState.modifiedSinceLastSubmit=!(!formState.lastSubmittedValues||!Object.keys(safeFields).some((function(value){return safeFields[value].modifiedSinceLastSubmit}))),formState.valid=!(formState.error||formState.submitError||hasAnyError(formState.errors)||formState.submitErrors&&hasAnyError(formState.submitErrors));var nextFormState=function convertToExternalFormState(_ref){var active=_ref.active,dirtySinceLastSubmit=_ref.dirtySinceLastSubmit,modifiedSinceLastSubmit=_ref.modifiedSinceLastSubmit,error=_ref.error,errors=_ref.errors,initialValues=_ref.initialValues,pristine=_ref.pristine,submitting=_ref.submitting,submitFailed=_ref.submitFailed,submitSucceeded=_ref.submitSucceeded,submitError=_ref.submitError,submitErrors=_ref.submitErrors,valid=_ref.valid,validating=_ref.validating,values=_ref.values;return{active,dirty:!pristine,dirtySinceLastSubmit,modifiedSinceLastSubmit,error,errors,hasSubmitErrors:!!(submitError||submitErrors&&hasAnyError(submitErrors)),hasValidationErrors:!(!error&&!hasAnyError(errors)),invalid:!valid,initialValues,pristine,submitting,submitFailed,submitSucceeded,submitError,submitErrors,valid,validating:validating>0,values}}(formState),_safeFieldKeys$reduce=safeFieldKeys.reduce((function(result,key){return result.modified[key]=safeFields[key].modified,result.touched[key]=safeFields[key].touched,result.visited[key]=safeFields[key].visited,result}),{modified:{},touched:{},visited:{}}),modified=_safeFieldKeys$reduce.modified,touched=_safeFieldKeys$reduce.touched,visited=_safeFieldKeys$reduce.visited;return nextFormState.dirtyFields=lastFormState&&shallowEqual(lastFormState.dirtyFields,dirtyFields)?lastFormState.dirtyFields:dirtyFields,nextFormState.dirtyFieldsSinceLastSubmit=lastFormState&&shallowEqual(lastFormState.dirtyFieldsSinceLastSubmit,dirtyFieldsSinceLastSubmit)?lastFormState.dirtyFieldsSinceLastSubmit:dirtyFieldsSinceLastSubmit,nextFormState.modified=lastFormState&&shallowEqual(lastFormState.modified,modified)?lastFormState.modified:modified,nextFormState.touched=lastFormState&&shallowEqual(lastFormState.touched,touched)?lastFormState.touched:touched,nextFormState.visited=lastFormState&&shallowEqual(lastFormState.visited,visited)?lastFormState.visited:visited,lastFormState&&shallowEqual(lastFormState,nextFormState)?lastFormState:nextFormState},notifying=!1,scheduleNotification=!1,notifyFormListeners=function notifyFormListeners(){if(notifying)scheduleNotification=!0;else{if(notifying=!0,function callDebug(){debug&&debug(calculateNextFormState(),Object.keys(state.fields).reduce((function(result,key){return result[key]=state.fields[key],result}),{}))}(),!(inBatch||validationPaused&&preventNotificationWhileValidationPaused)){var lastFormState=state.lastFormState,nextFormState=calculateNextFormState();nextFormState!==lastFormState&&(state.lastFormState=nextFormState,notify(state.subscribers,nextFormState,lastFormState,filterFormState))}notifying=!1,scheduleNotification&&(scheduleNotification=!1,notifyFormListeners())}},resetModifiedAfterSubmit=function resetModifiedAfterSubmit(){return Object.keys(state.fields).forEach((function(key){return state.fields[key].modifiedSinceLastSubmit=!1}))};runValidation(void 0,(function(){notifyFormListeners()}));var api={batch:function batch(fn){inBatch++,fn(),inBatch--,notifyFieldListeners(),notifyFormListeners()},blur:function blur(name){var fields=state.fields,formState=state.formState,previous=fields[name];previous&&(delete formState.active,fields[name]=(0,esm_extends.Z)({},previous,{active:!1,touched:!0}),validateOnBlur?runValidation(name,(function(){notifyFieldListeners(),notifyFormListeners()})):(notifyFieldListeners(),notifyFormListeners()))},change:function change(name,value){var fields=state.fields,formState=state.formState;if(getIn(formState.values,name)!==value){changeValue(state,name,(function(){return value}));var previous=fields[name];previous&&(fields[name]=(0,esm_extends.Z)({},previous,{modified:!0,modifiedSinceLastSubmit:!!formState.lastSubmittedValues})),validateOnBlur?(notifyFieldListeners(),notifyFormListeners()):runValidation(name,(function(){notifyFieldListeners(),notifyFormListeners()}))}},get destroyOnUnregister(){return!!destroyOnUnregister},set destroyOnUnregister(value){destroyOnUnregister=value},focus:function focus(name){var field=state.fields[name];field&&!field.active&&(state.formState.active=name,field.active=!0,field.visited=!0,notifyFieldListeners(),notifyFormListeners())},mutators:mutatorsApi,getFieldState:function getFieldState(name){var field=state.fields[name];return field&&field.lastFieldState},getRegisteredFields:function getRegisteredFields(){return Object.keys(state.fields)},getState:function getState(){return calculateNextFormState()},initialize:function initialize(data){var fields=state.fields,formState=state.formState,safeFields=(0,esm_extends.Z)({},fields),values="function"==typeof data?data(formState.values):data;keepDirtyOnReinitialize||(formState.values=values);var savedDirtyValues=keepDirtyOnReinitialize?Object.keys(safeFields).reduce((function(result,key){return safeFields[key].isEqual(getIn(formState.values,key),getIn(formState.initialValues||{},key))||(result[key]=getIn(formState.values,key)),result}),{}):{};formState.initialValues=values,formState.values=values,Object.keys(savedDirtyValues).forEach((function(key){formState.values=setIn(formState.values,key,savedDirtyValues[key])||{}})),runValidation(void 0,(function(){notifyFieldListeners(),notifyFormListeners()}))},isValidationPaused:function isValidationPaused(){return validationPaused},pauseValidation:function pauseValidation(preventNotification){void 0===preventNotification&&(preventNotification=!0),validationPaused=!0,preventNotificationWhileValidationPaused=preventNotification},registerField:function registerField(name,subscriber,subscription,fieldConfig){void 0===subscription&&(subscription={}),state.fieldSubscribers[name]||(state.fieldSubscribers[name]={index:0,entries:{}});var index=state.fieldSubscribers[name].index++;state.fieldSubscribers[name].entries[index]={subscriber:memoize(subscriber),subscription,notified:!1};var field=state.fields[name]||{active:!1,afterSubmit:fieldConfig&&fieldConfig.afterSubmit,beforeSubmit:fieldConfig&&fieldConfig.beforeSubmit,data:fieldConfig&&fieldConfig.data||{},isEqual:fieldConfig&&fieldConfig.isEqual||tripleEquals,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name,touched:!1,valid:!0,validateFields:fieldConfig&&fieldConfig.validateFields,validators:{},validating:!1,visited:!1};field.blur=field.blur||function(){return api.blur(name)},field.change=field.change||function(value){return api.change(name,value)},field.focus=field.focus||function(){return api.focus(name)},state.fields[name]=field;var haveValidator=!1,silent=fieldConfig&&fieldConfig.silent,notify=function notify(){silent&&state.fields[name]?notifyFieldListeners(name):(notifyFormListeners(),notifyFieldListeners())};if(fieldConfig){haveValidator=!(!fieldConfig.getValidator||!fieldConfig.getValidator()),fieldConfig.getValidator&&(state.fields[name].validators[index]=fieldConfig.getValidator);var noValueInFormState=void 0===getIn(state.formState.values,name);void 0===fieldConfig.initialValue||!noValueInFormState&&getIn(state.formState.values,name)!==getIn(state.formState.initialValues,name)||(state.formState.initialValues=setIn(state.formState.initialValues||{},name,fieldConfig.initialValue),state.formState.values=setIn(state.formState.values,name,fieldConfig.initialValue),runValidation(void 0,notify)),void 0!==fieldConfig.defaultValue&&void 0===fieldConfig.initialValue&&void 0===getIn(state.formState.initialValues,name)&&noValueInFormState&&(state.formState.values=setIn(state.formState.values,name,fieldConfig.defaultValue))}return haveValidator?runValidation(void 0,notify):notify(),function(){var validatorRemoved=!1;state.fields[name]&&(validatorRemoved=!(!state.fields[name].validators[index]||!state.fields[name].validators[index]()),delete state.fields[name].validators[index]);var hasFieldSubscribers=!!state.fieldSubscribers[name];hasFieldSubscribers&&delete state.fieldSubscribers[name].entries[index];var lastOne=hasFieldSubscribers&&!Object.keys(state.fieldSubscribers[name].entries).length;lastOne&&(delete state.fieldSubscribers[name],delete state.fields[name],validatorRemoved&&(state.formState.errors=setIn(state.formState.errors,name,void 0)||{}),destroyOnUnregister&&(state.formState.values=setIn(state.formState.values,name,void 0,!0)||{})),silent||(validatorRemoved?runValidation(void 0,(function(){notifyFormListeners(),notifyFieldListeners()})):lastOne&&notifyFormListeners())}},reset:function reset(initialValues){void 0===initialValues&&(initialValues=state.formState.initialValues),state.formState.submitting&&(state.formState.resetWhileSubmitting=!0),state.formState.submitFailed=!1,state.formState.submitSucceeded=!1,delete state.formState.submitError,delete state.formState.submitErrors,delete state.formState.lastSubmittedValues,api.initialize(initialValues||{})},resetFieldState:function resetFieldState(name){state.fields[name]=(0,esm_extends.Z)({},state.fields[name],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),runValidation(void 0,(function(){notifyFieldListeners(),notifyFormListeners()}))},restart:function restart(initialValues){void 0===initialValues&&(initialValues=state.formState.initialValues),api.batch((function(){for(var name in state.fields)api.resetFieldState(name),state.fields[name]=(0,esm_extends.Z)({},state.fields[name],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});api.reset(initialValues)}))},resumeValidation:function resumeValidation(){validationPaused=!1,preventNotificationWhileValidationPaused=!1,validationBlocked&&runValidation(void 0,(function(){notifyFieldListeners(),notifyFormListeners()})),validationBlocked=!1},setConfig:function setConfig(name,value){switch(name){case"debug":debug=value;break;case"destroyOnUnregister":destroyOnUnregister=value;break;case"initialValues":api.initialize(value);break;case"keepDirtyOnReinitialize":keepDirtyOnReinitialize=value;break;case"mutators":mutators=value,value?(Object.keys(mutatorsApi).forEach((function(key){key in value||delete mutatorsApi[key]})),Object.keys(value).forEach((function(key){mutatorsApi[key]=getMutatorApi(key)}))):Object.keys(mutatorsApi).forEach((function(key){delete mutatorsApi[key]}));break;case"onSubmit":onSubmit=value;break;case"validate":validate=value,runValidation(void 0,(function(){notifyFieldListeners(),notifyFormListeners()}));break;case"validateOnBlur":validateOnBlur=value;break;default:throw new Error("Unrecognised option "+name)}},submit:function submit(){var formState=state.formState;if(!formState.submitting){if(delete formState.submitErrors,delete formState.submitError,formState.lastSubmittedValues=(0,esm_extends.Z)({},formState.values),function hasSyncErrors(){return!(!state.formState.error&&!hasAnyError(state.formState.errors))}())return markAllFieldsTouched(),resetModifiedAfterSubmit(),state.formState.submitFailed=!0,notifyFormListeners(),void notifyFieldListeners();var asyncValidationPromisesKeys=Object.keys(asyncValidationPromises);if(asyncValidationPromisesKeys.length)Promise.all(asyncValidationPromisesKeys.map((function(key){return asyncValidationPromises[Number(key)]}))).then(api.submit,console.error);else if(!function beforeSubmit(){return Object.keys(state.fields).some((function(name){return state.fields[name].beforeSubmit&&!1===state.fields[name].beforeSubmit()}))}()){var resolvePromise,completeCalled=!1,complete=function complete(errors){formState.submitting=!1;var resetWhileSubmitting=formState.resetWhileSubmitting;return resetWhileSubmitting&&(formState.resetWhileSubmitting=!1),errors&&hasAnyError(errors)?(formState.submitFailed=!0,formState.submitSucceeded=!1,formState.submitErrors=errors,formState.submitError=errors[FORM_ERROR],markAllFieldsTouched()):(resetWhileSubmitting||(formState.submitFailed=!1,formState.submitSucceeded=!0),function afterSubmit(){Object.keys(state.fields).forEach((function(name){return state.fields[name].afterSubmit&&state.fields[name].afterSubmit()}))}()),notifyFormListeners(),notifyFieldListeners(),completeCalled=!0,resolvePromise&&resolvePromise(errors),errors};formState.submitting=!0,formState.submitFailed=!1,formState.submitSucceeded=!1,formState.lastSubmittedValues=(0,esm_extends.Z)({},formState.values),resetModifiedAfterSubmit();var result=onSubmit(formState.values,api,complete);if(!completeCalled){if(result&&isPromise(result))return notifyFormListeners(),notifyFieldListeners(),result.then(complete,(function(error){throw complete(),error}));if(onSubmit.length>=3)return notifyFormListeners(),notifyFieldListeners(),new Promise((function(resolve){resolvePromise=resolve}));complete(result)}}}},subscribe:function subscribe(subscriber,subscription){if(!subscriber)throw new Error("No callback given.");if(!subscription)throw new Error("No subscription provided. What values do you want to listen to?");var memoized=memoize(subscriber),subscribers=state.subscribers,index=subscribers.index++;subscribers.entries[index]={subscriber:memoized,subscription,notified:!1};var nextFormState=calculateNextFormState();return notifySubscriber(memoized,subscription,nextFormState,nextFormState,filterFormState,!0),function(){delete subscribers.entries[index]}}};return api}var _excluded$3=["render","children","component"];function renderComponent(props,lazyProps,name){var render=props.render,children=props.children,component=props.component,rest=(0,objectWithoutPropertiesLoose.Z)(props,_excluded$3);if(component)return react.createElement(component,Object.assign(lazyProps,rest,{children,render}));if(render)return render(void 0===children?Object.assign(lazyProps,rest):Object.assign(lazyProps,rest,{children}));if("function"!=typeof children)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+name);return children(Object.assign(lazyProps,rest))}function useWhenValueChanges(value,callback,isEqual){void 0===isEqual&&(isEqual=function isEqual(a,b){return a===b});var previous=react.useRef(value);react.useEffect((function(){isEqual(value,previous.current)||(callback(),previous.current=value)}))}var react_final_form_es_shallowEqual=function shallowEqual(a,b){if(a===b)return!0;if("object"!=typeof a||!a||"object"!=typeof b||!b)return!1;var keysA=Object.keys(a),keysB=Object.keys(b);if(keysA.length!==keysB.length)return!1;for(var bHasOwnProperty=Object.prototype.hasOwnProperty.bind(b),idx=0;idx<keysA.length;idx++){var key=keysA[idx];if(!bHasOwnProperty(key)||a[key]!==b[key])return!1}return!0},isSyntheticEvent=function isSyntheticEvent(candidate){return!(!candidate||"function"!=typeof candidate.stopPropagation)},ReactFinalFormContext=react.createContext();function useLatest(value){var ref=react.useRef(value);return react.useEffect((function(){ref.current=value})),ref}var addLazyState=function addLazyState(dest,state,keys){keys.forEach((function(key){Object.defineProperty(dest,key,{get:function get(){return state[key]},enumerable:!0})}))},addLazyFormState=function addLazyFormState(dest,state){return addLazyState(dest,state,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},_excluded$2=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],versions={"final-form":"4.20.10","react-final-form":"6.5.8"},all$1=formSubscriptionItems.reduce((function(result,key){return result[key]=!0,result}),{});function ReactFinalForm(_ref){var debug=_ref.debug,_ref$decorators=_ref.decorators,decorators=void 0===_ref$decorators?[]:_ref$decorators,destroyOnUnregister=_ref.destroyOnUnregister,alternateFormApi=_ref.form,initialValues=_ref.initialValues,initialValuesEqual=_ref.initialValuesEqual,keepDirtyOnReinitialize=_ref.keepDirtyOnReinitialize,mutators=_ref.mutators,onSubmit=_ref.onSubmit,_ref$subscription=_ref.subscription,subscription=void 0===_ref$subscription?all$1:_ref$subscription,validate=_ref.validate,validateOnBlur=_ref.validateOnBlur,rest=(0,objectWithoutPropertiesLoose.Z)(_ref,_excluded$2),config={debug,destroyOnUnregister,initialValues,keepDirtyOnReinitialize,mutators,onSubmit,validate,validateOnBlur},form=function useConstant(init){var ref=react.useRef();return ref.current||(ref.current=init()),ref.current}((function(){var f=alternateFormApi||createForm(config);return f.pauseValidation(),f})),_React$useState=react.useState((function(){var initialState={};return form.subscribe((function(state){initialState=state}),subscription)(),initialState})),state=_React$useState[0],setState=_React$useState[1],stateRef=useLatest(state);react.useEffect((function(){form.isValidationPaused()&&form.resumeValidation();var unsubscriptions=[form.subscribe((function(s){react_final_form_es_shallowEqual(s,stateRef.current)||setState(s)}),subscription)].concat(decorators?decorators.map((function(decorator){return decorator(form)})):[]);return function(){form.pauseValidation(),unsubscriptions.reverse().forEach((function(unsubscribe){return unsubscribe()}))}}),decorators),useWhenValueChanges(debug,(function(){form.setConfig("debug",debug)})),useWhenValueChanges(destroyOnUnregister,(function(){form.destroyOnUnregister=!!destroyOnUnregister})),useWhenValueChanges(keepDirtyOnReinitialize,(function(){form.setConfig("keepDirtyOnReinitialize",keepDirtyOnReinitialize)})),useWhenValueChanges(initialValues,(function(){form.setConfig("initialValues",initialValues)}),initialValuesEqual||react_final_form_es_shallowEqual),useWhenValueChanges(mutators,(function(){form.setConfig("mutators",mutators)})),useWhenValueChanges(onSubmit,(function(){form.setConfig("onSubmit",onSubmit)})),useWhenValueChanges(validate,(function(){form.setConfig("validate",validate)})),useWhenValueChanges(validateOnBlur,(function(){form.setConfig("validateOnBlur",validateOnBlur)}));var renderProps={form:(0,esm_extends.Z)({},form,{reset:function reset(eventOrValues){isSyntheticEvent(eventOrValues)?form.reset():form.reset(eventOrValues)}}),handleSubmit:function handleSubmit(event){return event&&("function"==typeof event.preventDefault&&event.preventDefault(),"function"==typeof event.stopPropagation&&event.stopPropagation()),form.submit()}};return addLazyFormState(renderProps,state),react.createElement(ReactFinalFormContext.Provider,{value:form},renderComponent((0,esm_extends.Z)({},rest,{__versions:versions}),renderProps,"ReactFinalForm"))}function useForm(componentName){var form=react.useContext(ReactFinalFormContext);if(!form)throw new Error((componentName||"useForm")+" must be used inside of a <Form> component");return form}var isReactNative="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product;function useConstantCallback(callback){var ref=react.useRef(callback);return react.useEffect((function(){ref.current=callback})),react.useCallback((function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return ref.current.apply(null,args)}),[])}var react_final_form_es_all=fieldSubscriptionItems.reduce((function(result,key){return result[key]=!0,result}),{}),defaultFormat=function defaultFormat(value,name){return void 0===value?"":value},defaultParse=function defaultParse(value,name){return""===value?void 0:value},defaultIsEqual=function defaultIsEqual(a,b){return a===b};function useField(name,config){void 0===config&&(config={});var _config=config,afterSubmit=_config.afterSubmit,allowNull=_config.allowNull,component=_config.component,data=_config.data,defaultValue=_config.defaultValue,_config$format=_config.format,format=void 0===_config$format?defaultFormat:_config$format,formatOnBlur=_config.formatOnBlur,initialValue=_config.initialValue,multiple=_config.multiple,_config$parse=_config.parse,parse=void 0===_config$parse?defaultParse:_config$parse,_config$subscription=_config.subscription,subscription=void 0===_config$subscription?react_final_form_es_all:_config$subscription,type=_config.type,validateFields=_config.validateFields,_value=_config.value,form=useForm("useField"),configRef=useLatest(config),register=function register(callback,silent){return form.registerField(name,callback,subscription,{afterSubmit,beforeSubmit:function beforeSubmit(){var _configRef$current=configRef.current,beforeSubmit=_configRef$current.beforeSubmit,formatOnBlur=_configRef$current.formatOnBlur,_configRef$current$fo=_configRef$current.format,format=void 0===_configRef$current$fo?defaultFormat:_configRef$current$fo;if(formatOnBlur){var value=form.getFieldState(name).value,formatted=format(value,name);formatted!==value&&form.change(name,formatted)}return beforeSubmit&&beforeSubmit()},data,defaultValue,getValidator:function getValidator(){return configRef.current.validate},initialValue,isEqual:function isEqual(a,b){return(configRef.current.isEqual||defaultIsEqual)(a,b)},silent,validateFields})},firstRender=react.useRef(!0),_React$useState=react.useState((function(){var initialState={},destroyOnUnregister=form.destroyOnUnregister;return form.destroyOnUnregister=!1,register((function(state){initialState=state}),!0)(),form.destroyOnUnregister=destroyOnUnregister,initialState})),state=_React$useState[0],setState=_React$useState[1];react.useEffect((function(){return register((function(state){firstRender.current?firstRender.current=!1:setState(state)}),!1)}),[name,data,defaultValue,initialValue]);var meta={};!function addLazyFieldMetaState(dest,state){addLazyState(dest,state,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])}(meta,state);var input={name,get value(){var value=state.value;return formatOnBlur?"input"===component&&(value=defaultFormat(value)):value=format(value,name),null!==value||allowNull||(value=""),"checkbox"===type||"radio"===type?_value:"select"===component&&multiple?value||[]:value},get checked(){var value=state.value;return"checkbox"===type?(value=format(value,name),void 0===_value?!!value:!(!Array.isArray(value)||!~value.indexOf(_value))):"radio"===type?format(value,name)===_value:void 0},onBlur:useConstantCallback((function(event){if(state.blur(),formatOnBlur){var fieldState=form.getFieldState(state.name);state.change(format(fieldState.value,state.name))}})),onChange:useConstantCallback((function(event){var value=event&&event.target?function getValue(event,currentValue,valueProp,isReactNative){if(!isReactNative&&event.nativeEvent&&void 0!==event.nativeEvent.text)return event.nativeEvent.text;if(isReactNative&&event.nativeEvent)return event.nativeEvent.text;var _detypedEvent$target=event.target,type=_detypedEvent$target.type,value=_detypedEvent$target.value,checked=_detypedEvent$target.checked;switch(type){case"checkbox":if(void 0!==valueProp){if(checked)return Array.isArray(currentValue)?currentValue.concat(valueProp):[valueProp];if(!Array.isArray(currentValue))return currentValue;var index=currentValue.indexOf(valueProp);return index<0?currentValue:currentValue.slice(0,index).concat(currentValue.slice(index+1))}return!!checked;case"select-multiple":return function getSelectedValues(options){var result=[];if(options)for(var index=0;index<options.length;index++){var option=options[index];option.selected&&result.push(option.value)}return result}(event.target.options);default:return value}}(event,state.value,_value,isReactNative):event;state.change(parse(value,name))})),onFocus:useConstantCallback((function(event){return state.focus()}))};return multiple&&(input.multiple=multiple),void 0!==type&&(input.type=type),{input,meta}}var _excluded=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],Field=react.forwardRef((function Field(_ref,ref){var afterSubmit=_ref.afterSubmit,allowNull=_ref.allowNull,beforeSubmit=_ref.beforeSubmit,children=_ref.children,component=_ref.component,data=_ref.data,defaultValue=_ref.defaultValue,format=_ref.format,formatOnBlur=_ref.formatOnBlur,initialValue=_ref.initialValue,isEqual=_ref.isEqual,multiple=_ref.multiple,name=_ref.name,parse=_ref.parse,subscription=_ref.subscription,type=_ref.type,validate=_ref.validate,validateFields=_ref.validateFields,value=_ref.value,rest=(0,objectWithoutPropertiesLoose.Z)(_ref,_excluded),field=useField(name,{afterSubmit,allowNull,beforeSubmit,children,component,data,defaultValue,format,formatOnBlur,initialValue,isEqual,multiple,parse,subscription,type,validate,validateFields,value});if("function"==typeof children)return children((0,esm_extends.Z)({},field,rest));if("string"==typeof component)return react.createElement(component,(0,esm_extends.Z)({},field.input,{children,ref},rest));if(!name)throw new Error("prop name cannot be undefined in <Field> component");return renderComponent((0,esm_extends.Z)({children,component,ref},rest),field,"Field("+name+")")}))}}]);